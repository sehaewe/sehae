import{r as s,u as j,j as e}from"./index-BqfwYoVw.js";function y(){const[n,d]=s.useState([]),[c,x]=s.useState(!0),[l,m]=s.useState(""),g=j();s.useEffect(()=>{h()},[]);const h=async()=>{try{const t=await fetch("/api/medical");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const o=await t.json();d(o)}catch(t){m(t.message),console.error(t)}finally{x(!1)}},p=async(t,o)=>{if(window.confirm(`هل أنت متأكد من حذف سجل "${o}"؟`))try{const r=await fetch(`/api/medical/${t}`,{method:"DELETE"});if(r.ok)d(n.filter(a=>a._id!==t)),alert("تم الحذف بنجاح!");else{const a=await r.json();alert(a.error||"فشل الحذف")}}catch(r){alert("حدث خطأ أثناء الحذف"),console.error(r)}},u=t=>{g(`/edit-medical/${t}`)},i=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return c?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"جاري التحميل..."}):l?e.jsx("div",{style:{color:"red",textAlign:"center",padding:"2rem"},children:l}):e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("h2",{style:{textAlign:"center",marginBottom:"1.5rem"},children:"جميع السجلات الطبية"}),n.length===0?e.jsx("p",{style:{textAlign:"center",color:"#666"},children:"لا توجد سجلات طبية."}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1.5rem",maxWidth:"1200px",margin:"0 auto"},children:n.map(t=>e.jsxs("div",{className:"record-card",style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",backgroundColor:"#fff"},children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("strong",{children:"الاسم:"})," ",t.name]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"رقم الهوية:"})," ",t.idNumber]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"رمز الخدمة:"})," ",t.servicecode]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"تاريخ الإصدار:"})," ",i(t.issueDate)]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"يبدأ من:"})," ",i(t.startDate)]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"حتى:"})," ",i(t.endDate)]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"المدة:"})," ",t.duration," يومًا"]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"الطبيب:"})," ",t.doctor]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("strong",{children:"المسمى:"})," ",t.jobTitle]}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>u(t._id),style:{padding:"6px 12px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem"},children:"تعديل"}),e.jsx("button",{onClick:()=>p(t._id,t.name),style:{padding:"6px 12px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem"},children:"حذف"})]})]},t._id))})]})}export{y as default};
